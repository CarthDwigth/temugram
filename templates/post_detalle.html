<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Post de @{{ post[0] }} - TemuGram</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}">
</head>
<body style="background: #000; color: white;">
    <nav class="navbar">
        <a href="{{ url_for('main_routes.index') }}" class="btn-volver">‚Üê Volver al Inicio</a>
        <strong>TemuGram</strong>
    </nav>

    <div class="post-container-full">
        <div class="post-image-side" id="imageWrapper">
            <img src="{{ post[2] }}" id="mainImage" alt="Post">
        </div>

        <div class="post-info-side">
            <div style="padding: 15px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-size: 1.5rem;">{{ post[5] or 'üë§' }}</span>
                    <strong>@{{ post[0] }}</strong>
                </div>
                <p style="color: #eee; margin-bottom: 15px;">{{ post[1] }}</p>
                
                <div style="display: flex; align-items: center; gap: 10px;">
                    <form action="{{ url_for('post_routes.reaccionar', post_id=post[3]) }}" method="POST">
                        <button type="submit" style="background:none; border:none; color:white; font-size: 1.2rem; cursor:pointer;">‚ù§Ô∏è</button>
                    </form>
                    <span><strong>{{ post[6] or 0 }}</strong> Me gusta</span>
                </div>
            </div>

            <div class="scroll-comentarios">
                {% for c in comentarios %}
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; background: #1a1a1a; padding: 8px; border-radius: 6px;">
                    <div>
                        <strong style="font-size: 0.9rem;">@{{ c[1] }}</strong>
                        <p style="font-size: 0.9rem; margin: 2px 0;">{{ c[2] }}</p>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center;">
                        <form action="{{ url_for('post_routes.reaccionar_comentario', comentario_id=c[0]) }}" method="POST">
                            <button type="submit" style="background:none; border:none; color:white; cursor:pointer; font-size: 0.8rem;">ü§ç</button>
                        </form>
                        <span style="font-size: 0.7rem; color: #888;">{{ c[4] or 0 }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div style="padding: 15px; border-top: 1px solid #333;">
                <form action="{{ url_for('post_routes.comentar', post_id=post[3]) }}" method="POST" style="display: flex; gap: 5px;">
                    <input type="text" name="texto" placeholder="A√±adir un comentario..." required 
                           style="flex: 1; background: #222; border: 1px solid #444; color: white; padding: 8px; border-radius: 4px;">
                    <button type="submit" style="background: #ff4d4d; border: none; color: white; padding: 8px 15px; border-radius: 4px; font-weight: bold;">Publicar</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const imageWrapper = document.getElementById('imageWrapper');
        const mainImage = document.getElementById('mainImage');

        mainImage.addEventListener('click', () => {
            imageWrapper.classList.toggle('img-fullscreen');
            
            // Si entra en fullscreen, permitimos cerrarlo al hacer clic en cualquier parte del fondo
            if(imageWrapper.classList.contains('img-fullscreen')) {
                imageWrapper.addEventListener('click', closeFullscreen);
            }
        });

        function closeFullscreen(e) {
            imageWrapper.classList.remove('img-fullscreen');
            imageWrapper.removeEventListener('click', closeFullscreen);
        }
    </script>
</body>
</html>